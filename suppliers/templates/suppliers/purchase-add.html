{% extends 'easycomb_theme/layout.html' %}

{% load static %}


{% block header-resource %}
<!-- Tempusdominus Bbootstrap 4 -->
<link rel="stylesheet"
    href="{% static 'easycomb_theme/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
{% endblock header-resource %}

{% block section-title %}
Nueva Compra
{% endblock section-title %}

{% block content %}
<!-- Main content -->
<section class="content">
    <!-- general form elements -->
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title">Nueva Compra</h3>
        </div>
        <!-- /.card-header -->
        <!-- form start -->
        <form action="" method="post" role="form">
            {% csrf_token %}
            <div class="card-body">
                <div class="form-group">
                    <label for="{{ form.supplier.name }}">Proveedor</label>
                    {{ form.supplier }}
                </div>
                <!-- Date -->
                <div class="form-group">
                    <label>Date:</label>
                    <div class="input-group date" id="reservationdate" data-target-input="nearest">
                        {{ form.date }}
                        <div class="input-group-append" data-target="#reservationdate" data-toggle="datetimepicker">
                            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="{{ form.remarks.name }}">Descripcion</label>
                    {{ form.remarks }}
                </div>

                <div class="row">
                    {% for form in formset %}
                    <div class="col col-md-6 col-lg-4">
                        <div class="card card-info">
                            <div class="card-header">
                                <h3 class="card-title">Producto</h3>

                                <div class="card-tools">
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse"
                                        data-toggle="tooltip" title="Collapse">
                                        <i class="fas fa-minus"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="{{ form.product.name }}">Producto</label>
                                    {{ form.product }}
                                </div>
                                <div class="form-group">
                                    <label for="{{ form.description.name }}">Descripcion</label>
                                    {{ form.description }}
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <label for="{{ form.cost.name }}">Costo por unidad</label>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">$</span>
                                            </div>
                                            {{ form.cost }}
                                            <div class="input-group-append">
                                                <span class="input-group-text">.00</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <label for="{{ form.cost.name }}">Cantidad</label>
                                        {{ form.quantity }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Este miniformulario maneja el inline -->
            {{ formset.management_form }}

            <!-- /.card-body -->
            <div class="card-footer d-flex justify-content-end">
                <button type="submit" class="btn btn-primary">Registrar Nueva Compra</button>
            </div>
        </form>

    </div>
</section>
<!-- /.content -->
{% endblock content %}

{% block page-script %}
<!-- moment -->
<script src="{% static 'easycomb_theme/plugins/moment/moment.min.js' %}"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script
    src="{% static 'easycomb_theme/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>

<!-- Page script -->
<script type="text/javascript">
    $(function () {
        //Date range picker
        $('#reservationdate').datetimepicker({
            format: 'L'
        });
    });
</script>
{% endblock page-script %}